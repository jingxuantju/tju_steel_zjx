# tju_steel_zjx
这是一个基于H型钢表面缺陷的在线检测其他的后端模块



## 库表设计

- 从项目的业务需求入手，业务需求主要有两点：
  - 检查每条型钢是否有缺陷
  - 如果有缺陷，需要检查是什么类型，并把这个图片保存下来
- 故设计三张表，分别是SumInfo（型钢表）和ImgInfo（图片表），如果设计一张表，则会造成大量的数据冗余，也不满足设计数据库的三大原则，第三张表是member（用户表）
- SumInfo表示每一条型钢的基本信息，自定义自增主键，型钢id不是主键
- ImgInfo表示每一个缺陷图片的基本信息，自定义自增主键，图片id不是主键
- member表示用户，自定义自增主键
- 目前的数量量不是很大，根据钢厂的实际情况，每天生成800根型钢，目前数据量在20万数量级
  - 如果后期单表数量大于500万，还会进一步进行分库分表
- 最开始查询型钢的速度还是很快的，但是随着过了3周还是一个月左右，就出现了严重的慢查询现象
  - 经过分析，是因为没有在型钢id上添加索引导致的，故添加索引，解决了慢查询问题，因为InnoDB会自动创建主键索引，而由于我设置的是主键自增的策略，而在实际中查找的确是通过型钢id查询，所以导致了慢查询现象。
- 为了方便前端的查询，故封装两个查询对象：ImgInfoQueryVo和SumInfoQueryVo


